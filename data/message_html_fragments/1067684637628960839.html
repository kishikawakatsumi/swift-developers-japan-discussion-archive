<div class="chatlog__message-group">
  <div id="chatlog__message-container-1067684637628960839" class="chatlog__message-container" data-message-id="1067684637628960839">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/291062140079570944/75d22639a88c37be90cb60118acb7df5.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(241,196,15)" title="kateinoigakukun#2184" data-user-id="291062140079570944">kateinoigakukun</span> <a href="/channels/306995750418513920?category=main&amp;channel=swift-2&amp;message_id=1067686386494349322"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-1067684637628960839">01/25/2023 5:57 AM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">むやみにUnrollしてコードサイズ増やすとCPUキャッシュのヒット率が下がって、むしろ遅くなるのでそういうしきい値が入ってるんですけど、今回のRustの場合だと展開後の定数畳み込みと、それによるdead code eliminatinでうまくハマってる感じだと思います。</span> <span class="chatlog__edited-timestamp" title="01/25/2023 5:57 AM">(edited)</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-1067686264284921956" class="chatlog__message-container" data-message-id="1067686264284921956">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="01/25/2023 6:04 AM">06:04</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">perf-stat</code>の結果 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">$ perf stat -d -d -- ./target.rust-run 5000000 Performance counter stats for './target.rust-run 5000000': 187.63 msec task-clock # 0.994 CPUs utilized 20 context-switches # 0.107 K/sec 0 cpu-migrations # 0.000 K/sec 85 page-faults # 0.453 K/sec 864088142 cycles # 4.605 GHz (32.07%) 385088 stalled-cycles-frontend # 0.04% frontend cycles idle (34.18%) 421948 stalled-cycles-backend # 0.05% backend cycles idle (36.31%) 1486120161 instructions # 1.72 insn per cycle # 0.00 stalled cycles per insn (38.44%) 18768109 branches # 100.027 M/sec (40.55%) 29184 branch-misses # 0.16% of all branches (42.36%) 543690464 L1-dcache-loads # 2897.670 M/sec (40.26%) 19859 L1-dcache-load-misses # 0.00% of all L1-dcache hits (38.12%) &lt;not supported&gt; LLC-loads &lt;not supported&gt; LLC-load-misses 141810 L1-icache-loads # 0.756 M/sec (35.99%) 2004 L1-icache-load-misses # 1.41% of all L1-icache hits (33.87%) 78 dTLB-loads # 0.416 K/sec (31.97%) 21 dTLB-load-misses # 26.92% of all dTLB cache hits (31.96%) 0 iTLB-loads # 0.000 K/sec (31.97%) 18 iTLB-load-misses # 0.00% of all iTLB cache hits (31.96%) 0.188802738 seconds time elapsed 0.188263000 seconds user 0.000000000 seconds sys</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-1067686386494349322" class="chatlog__message-container" data-message-id="1067686386494349322">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="01/25/2023 6:04 AM">06:04</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">$ perf stat -d -d -- ./head.swift-run 5000000 Performance counter stats for './head.swift-run 5000000': 260.12 msec task-clock # 0.996 CPUs utilized 26 context-switches # 0.100 K/sec 0 cpu-migrations # 0.000 K/sec 71 page-faults # 0.273 K/sec 1200493971 cycles # 4.615 GHz (30.86%) 451884 stalled-cycles-frontend # 0.04% frontend cycles idle (32.41%) 132 stalled-cycles-backend # 0.00% backend cycles idle (33.94%) 2904262641 instructions # 2.42 insn per cycle # 0.00 stalled cycles per insn (35.46%) 217096810 branches # 834.616 M/sec (37.00%) 10523 branch-misses # 0.00% of all branches (38.42%) 675633481 L1-dcache-loads # 2597.435 M/sec (38.42%) 10807 L1-dcache-load-misses # 0.00% of all L1-dcache hits (38.42%) &lt;not supported&gt; LLC-loads &lt;not supported&gt; LLC-load-misses 119631 L1-icache-loads # 0.460 M/sec (38.43%) 3361 L1-icache-load-misses # 2.81% of all L1-icache hits (38.41%) 6382 dTLB-loads # 0.025 M/sec (36.86%) 116 dTLB-load-misses # 1.82% of all dTLB cache hits (35.33%) 417 iTLB-loads # 0.002 M/sec (33.80%) 176 iTLB-load-misses # 42.21% of all iTLB cache hits (32.25%) 0.261201137 seconds time elapsed 0.260805000 seconds user 0.000000000 seconds sys</code></span></div>
      </div>
    </div>
  </div>
</div>