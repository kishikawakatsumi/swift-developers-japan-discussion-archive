<div class="chatlog__message-group">
  <div id="chatlog__message-container-337773698067070976" class="chatlog__message-container" data-message-id="337773698067070976">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/293624673265123328/accd07acc220a18568ba46a6e9ede18a.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(17,128,106)" title="koher#9336" data-user-id="293624673265123328">koher</span> <a href="/channels/306995750418513920?category=main&amp;channel=swift-2&amp;message_id=337773698067070976"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-337773698067070976">07/21/2017 1:52 AM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">Java だと <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">long</code> と <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">double</code> 以外のプリミティブや参照の読み書きは atomic っぽいから、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">int</code> を同時に読み書きすること自体には問題なさそう。 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">For the purposes of the Java programming language memory model, a single write to a non-volatile long or double value is treated as two separate writes: one to each 32-bit half. This can result in a situation where a thread sees the first 32 bits of a 64-bit value from one write, and the second 32 bits from another write. Writes and reads of volatile long and double values are always atomic. Writes to and reads of references are always atomic, regardless of whether they are implemented as 32-bit or 64-bit values.</code>
            <a href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html">http://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html</a></span></div>
      </div>
    </div>
  </div>
</div>