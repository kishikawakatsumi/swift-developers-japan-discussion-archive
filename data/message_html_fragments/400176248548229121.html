<div class="chatlog__message-group">
  <div id="chatlog__message-container-400175930640695296" class="chatlog__message-container" data-message-id="400175930640695296">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/189711109966659584/95280765d1be73ce985dce15ea3585f6.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(237,171,161)" title="omochimetaru#1122" data-user-id="189711109966659584">omochimetaru</span> <a href="/channels/291054454793306112?category=main&amp;channel=swift&amp;message_id=400177491194413067"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-400175930640695296">09-Jan-18 06:36 AM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">えっとまず</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400175943819198474" class="chatlog__message-container" data-message-id="400175943819198474">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:36 AM">06:36</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">struct Cat { var age: Int = 3 var name: String = "mike" } var cats = [Cat.init(), Cat(), Cat()] let x = cats.flatMap { $0.age } print(x)</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176021925527552" class="chatlog__message-container" data-message-id="400176021925527552">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:36 AM">06:36</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">[3, 3, 3]</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176063000477697" class="chatlog__message-container" data-message-id="400176063000477697">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:36 AM">06:36</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">これがコンパイルが通っちゃうのが微妙だよね、という話があります</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176148371341313" class="chatlog__message-container" data-message-id="400176148371341313">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:37 AM">06:37</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">これは、プログラマーが意図していたコードは正しくは、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">cats.map { $0.age }</code> です。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176248548229121" class="chatlog__message-container" data-message-id="400176248548229121">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:37 AM">06:37</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">String から Optional&lt;String&gt; への暗黙変換が発生するせいで、flatMap でも動いてしまっているんだけど、</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176314398801942" class="chatlog__message-container" data-message-id="400176314398801942">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:37 AM">06:37</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">実際には全部の要素が .some(String) になっているので、flatMapにする意味がなくって、mapにするべき、という例です。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176364298305538" class="chatlog__message-container" data-message-id="400176364298305538">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:38 AM">06:38</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">で、Swift4でStringがcollectionになっちゃったことによって・・・</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176495420768257" class="chatlog__message-container" data-message-id="400176495420768257">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:38 AM">06:38</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">let y = cats.flatMap { $0.name } print(y)</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176528102522880" class="chatlog__message-container" data-message-id="400176528102522880">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:38 AM">06:38</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">["m", "i", "k", "e", "m", "i", "k", "e", "m", "i", "k", "e"]</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176580128800768" class="chatlog__message-container" data-message-id="400176580128800768">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:38 AM">06:38</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">同じ間違いを、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">$0.age</code> じゃなくて、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">$0.name</code> で行った場合</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176600794267659" class="chatlog__message-container" data-message-id="400176600794267659">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:38 AM">06:38</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">↑のようにもっと悲惨な事になります。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176704334594048" class="chatlog__message-container" data-message-id="400176704334594048">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:39 AM">06:39</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">今度はこれは何が起きてるかっていうと、Collectionを返す関数をflatMap しているので、正しく flatten されてしまっていて</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176757694660611" class="chatlog__message-container" data-message-id="400176757694660611">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:39 AM">06:39</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">["mike", "mike", "mike"] になってほしかったのが</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400176861881040907" class="chatlog__message-container" data-message-id="400176861881040907">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:39 AM">06:39</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">"mike" が ["m", "i", "k", "e"] とみなされて、二重配列がflattenされる挙動になっちゃった。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400177035290607616" class="chatlog__message-container" data-message-id="400177035290607616">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:40 AM">06:40</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">想定してるのが「mapしたいのに間違ってflatMap書いちゃった」シナリオだから、</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400177054533943307" class="chatlog__message-container" data-message-id="400177054533943307">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:40 AM">06:40</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">挙動すらぶっ壊れたってことですね</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-400177491194413067" class="chatlog__message-container" data-message-id="400177491194413067">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="09-Jan-18 06:42 AM">06:42</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">で、この問題は、flatMapが受け付けるクロージャが T-&gt;[U] と T-&gt;U? の2種類のオーバーロードがあることによって、 全てがややこしくなってるから、 後者の T-&gt;U? を受け付けるflatMapはcompactMapに名前を変えることにした。</span></div>
        <div class="chatlog__reactions">
          <div class="chatlog__reaction" title="clap_tone1"><img class="chatlog__emoji chatlog__emoji--small" alt="👏🏻" src="https://twemoji.maxcdn.com/v/latest/svg/1f44f-1f3fb.svg" loading="lazy"> <span class="chatlog__reaction-count">2</span></div>
          <div class="chatlog__reaction" title="heart_eyes"><img class="chatlog__emoji chatlog__emoji--small" alt="😍" src="https://twemoji.maxcdn.com/v/latest/svg/1f60d.svg" loading="lazy"> <span class="chatlog__reaction-count">2</span></div>
        </div>
      </div>
    </div>
  </div>
</div>