<div class="chatlog__message-group">
  <div id="chatlog__message-container-959301497781383208" class="chatlog__message-container" data-message-id="959301497781383208">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/131342384406462464/cf965ca79d511a1b6806c08ea5bccc1c.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" title="tockrock#4224" data-user-id="131342384406462464">tockrock</span> <a href="/channels/763427634179735592/959045924213112832?category=atcoder&amp;channel=algo-848&amp;message_id=959302184267300894"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-959301497781383208">01-Apr-22 04:01 AM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">遅くなってしまったのですが、bmp[r] を先にnilとしても、aとbはnilにはならないのではないでしょうか。（そもそもオプショナルではない？） また、仮にそうなったとしたら、bmp[nil]となってしまい、エラーとなってしまいます。 そこでWAは別の原因があるのではないかと、試行錯誤してみました。 quesera2さんのおっしゃったように原因が追いにくのでご確認いただけると幸いです。 入力 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">3 5 0 1 2 0 2 1 1 2 1 1 0 1 0</code> 期待する出力 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Yes Yes Yes</code>
            <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 -&gt; 2 -&gt; 1</code>の状態に<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Contract(2)</code>とすることで<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 -&gt; 1</code>になります。 そこに<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Contract(1)</code>とすることで連結がなくなるはずなのですが、<a href="https://algo-method.com/submissions/372068">こちらの提出では</a> その後に代入をすることで<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 -&gt; 1</code>の状態に戻ってしまいます。 そのため、続く<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Connect(1, 0)</code>で連結ができずに、<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Error</code>を出力してしまいます。 スレッドでも触れていた <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">a==b</code>はこの解決が目的だったと思うのですが、今度は <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 -&gt; 1</code> の自己参照にならなくなっています。 入力 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">3 4 0 1 2 0 2 1 1 2 0 1 0</code> 期待する出力 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">Yes Yes Error</code> 再度、<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 -&gt; 2 -&gt; 1</code>の状態で <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Contract(2)</code> とした際に上記と同様に、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">1 -&gt; 1</code>となることが期待されます。 しかし、<a href="https://algo-method.com/submissions/372092">こちらの提出</a> では<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">bmp[1]</code>も<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">bmp[a] = (prev: nil, next: nil)</code>で、連結がない状態となります。 そのため、<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Connect(1, 0)</code>の際に <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Error</code> となりません。 そこで下記のように<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">a==r</code>として自己参照か判別し、何もせずに <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">break</code> することでACすることができました。 <a href="https://algo-method.com/submissions/372562">https://algo-method.com/submissions/372562</a></span> <span class="chatlog__edited-timestamp" title="01-Apr-22 04:05 AM">(edited)</span></div>
        <div class="chatlog__reactions">
          <div class="chatlog__reaction" title="t_tensai"><img class="chatlog__emoji chatlog__emoji--small" alt="t_tensai" src="https://cdn.discordapp.com/emojis/892024054138163221.png" loading="lazy"> <span class="chatlog__reaction-count">1</span></div>
          <div class="chatlog__reaction" title="pray"><img class="chatlog__emoji chatlog__emoji--small" alt="🙏" src="https://twemoji.maxcdn.com/v/latest/svg/1f64f.svg" loading="lazy"> <span class="chatlog__reaction-count">1</span></div>
        </div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-959302184267300894" class="chatlog__message-container" data-message-id="959302184267300894">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="01-Apr-22 04:04 AM">04:04</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">改めてみると長いですね…。申し訳ありません！（今後はgistとかの方が良いでしょうか？）</span></div>
      </div>
    </div>
  </div>
</div>