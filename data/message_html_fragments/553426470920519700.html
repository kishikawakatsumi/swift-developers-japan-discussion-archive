<div class="chatlog__message-group">
  <div id="chatlog__message-container-553422116544970752" class="chatlog__message-container" data-message-id="553422116544970752">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/189711109966659584/95280765d1be73ce985dce15ea3585f6.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(237,171,161)" title="omochimetaru#1122" data-user-id="189711109966659584">omochimetaru</span> <a href="/channels/291054454793306112?category=main&amp;channel=swift&amp;message_id=553428124038332427"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-553422116544970752">03/08/2019 3:41 AM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">Selfであってもcontravariant positionになっていないならば許すのね。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553422231968022531" class="chatlog__message-container" data-message-id="553422231968022531">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:42 AM">03:42</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">initはSelfを返してるようなもんだから、covariantだから、セーフかね</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553422411404541966" class="chatlog__message-container" data-message-id="553422411404541966">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:43 AM">03:43</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">protocol P { init(name: String) func a() -&gt; Self } struct S : P { init(name: String) {} func a() -&gt; S { fatalError() } } func takeExistentialArg(_ p: P) {}</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553422466660302868" class="chatlog__message-container" data-message-id="553422466660302868">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:43 AM">03:43</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">なるほどね</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553422723691577349" class="chatlog__message-container" data-message-id="553422723691577349">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:44 AM">03:44</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">protocol P { init(name: String) func a() -&gt; Self } protocol Q { func takeSelf(_ self_: Self) } func takeExistentialArgP(_ p: P) {} // Protocol 'Q' can only be used as a generic constraint because it has Self or associated type requirements func takeExistentialArgQ(_ q: Q) {}</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553422820366090251" class="chatlog__message-container" data-message-id="553422820366090251">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:44 AM">03:44</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">このエラーメッセージ、「it has Self」のところ、「it has contravariant Self」のほうが、良さそう。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553423253138571265" class="chatlog__message-container" data-message-id="553423253138571265">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:46 AM">03:46</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">protocol P { init(name: String) func a() -&gt; Self } protocol Q { func takeSelf(_ self_: Self) } extension P { func takeSelf(_ self_: Self) { } } func takeExistentialArgP(_ p: P) {}</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553423349355773975" class="chatlog__message-container" data-message-id="553423349355773975">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:46 AM">03:46</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">
            <div class="chatlog__markdown-quote">
              <div class="chatlog__markdown-quote-border"></div>
              <div class="chatlog__markdown-quote-content">However, nowadays we also have protocol extensions, so even if a protocol doesn't have any core requirements with contravariant Self or associated type arguments, contravariant protocol methods can be added by extensions, so the type system issues unavoidably exist already.</div>
            </div>
          </span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553423576754028548" class="chatlog__message-container" data-message-id="553423576754028548">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:47 AM">03:47</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">たとえ、protocol Pの本体が、contravariant Selfを使っていないとしても、extensionでそれを追加する事ができちゃうので、すでに一部壊れてる</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553424347734343690" class="chatlog__message-container" data-message-id="553424347734343690">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:50 AM">03:50</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">extension P { func transfer(_ self_: Self) -&gt; Self { return self_ } } func takeExistentialArgP(_ p: P) { // Member 'transfer' cannot be used on value of protocol type 'P'; use a generic constraint instead let a = p.transfer(p) }</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553424398355267584" class="chatlog__message-container" data-message-id="553424398355267584">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:50 AM">03:50</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">ウオオ</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553424580488986624" class="chatlog__message-container" data-message-id="553424580488986624">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:51 AM">03:51</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">protocol Pに生やしたのに existential Pでは使用禁止になるケースあるのか。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553425001198518293" class="chatlog__message-container" data-message-id="553425001198518293">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:53 AM">03:53</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">これがまさに <div class="chatlog__markdown-quote">
              <div class="chatlog__markdown-quote-border"></div>
              <div class="chatlog__markdown-quote-content">We'd follow the existing rule which is that protocol members that use contravariant Self or associated types aren't available on the existential. </div>
            </div>か</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553425333584527360" class="chatlog__message-container" data-message-id="553425333584527360">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:54 AM">03:54</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">だから、contra Self or assoctypeなメンバーの使用はできないという制限(これは実は既存)のもとで contra Self or assoctypeな protocolでもexistentialを可能にしよう　っていう提案か。</span> <span class="chatlog__edited-timestamp" title="03/08/2019 3:55 AM">(edited)</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553425756999647242" class="chatlog__message-container" data-message-id="553425756999647242">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:56 AM">03:56</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">これって要するに、</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553425875710771202" class="chatlog__message-container" data-message-id="553425875710771202">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:56 AM">03:56</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">protocolからcontra Selfとassoctypeを取り除いた親protocolを作って、親protocolのexistentialを使う、っていう現時点で可能なワークアラウンドと、表現能力は一緒かな</span> <span class="chatlog__edited-timestamp" title="03/08/2019 3:57 AM">(edited)</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553426470920519700" class="chatlog__message-container" data-message-id="553426470920519700">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 3:59 AM">03:59</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">existential P が protocol P に準拠できないのもこの差分があるから、って言うこともできるんかな</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553426717734076427" class="chatlog__message-container" data-message-id="553426717734076427">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 4:00 AM">04:00</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">つまり、existential Pは &lt;T: P&gt; と違って真の型を失ったただの型境界にすぎない？</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553427601168007169" class="chatlog__message-container" data-message-id="553427601168007169">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 4:03 AM">04:03</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">func foo&lt;T: P&gt;(_: T) extension P { func _forwardToFoo() { foo(self) } } func callFooOnEach(_ ps: [P]) { for p in ps { p._forwardToFoo() } }</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553427701042511874" class="chatlog__message-container" data-message-id="553427701042511874">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 4:04 AM">04:04</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">
            <div class="chatlog__markdown-quote">
              <div class="chatlog__markdown-quote-border"></div>
              <div class="chatlog__markdown-quote-content">you can in fact "open" the existential by invoking a protocol extension method, which will give you Self as the dynamic type of the value inside the method, which you can then pass to generic functions:</div>
            </div>
          </span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553427781485330443" class="chatlog__message-container" data-message-id="553427781485330443">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 4:04 AM">04:04</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">protocol extension経由でSelfをreopenできるってこれなんか前話したな</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-553428124038332427" class="chatlog__message-container" data-message-id="553428124038332427">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="03/08/2019 4:05 AM">04:05</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">Pの中に隠れてるから　_forwardToFoo　を呼ぶ側からみるとセーフなのか。</span></div>
      </div>
    </div>
  </div>
</div>