<div class="chatlog__message-group">
  <div class="chatlog__author-avatar-container">
    <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/392760542634180619/281004161d1558906e3872ce2319d5a5.png?size=128" alt="Avatar" loading="lazy">
  </div>
  <div class="chatlog__messages">
    <span class="chatlog__author-name" title="nade#8341" data-user-id="392760542634180619" style="color: rgb(241,196,15)">nade</span>
    <a href="/channels/375411941214126090?category=開発環境, ライブラリ&amp;channel=firebase&amp;message_id=476079567207923734"><span class="chatlog__timestamp">06-Aug-18 05:30 PM</span></a>
    <div class="chatlog__message " data-message-id="476079567207923734" id="message-476079567207923734" title="Message sent: 06-Aug-18 05:30 PM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">Firestoreにて，トランザクションを用いてデータの更新を行う部分で困ってます． 同時タイミングでの書き込みを想定し，validationの処理をトランザクション内で行いたいです． 1. すでに存在する{名前 = documentid}かどうかを確認 2. 被ってない場合ドキュメントを作成 しかし，存在しないドキュメントを <div class="pre pre--multiline nohighlight">do { try sfDocument = transaction.getDocument(sfReference) } catch let fetchError as NSError { errorPointer?.pointee = fetchError return nil }</div> で取得しようとすると，nilErrorが戻ってきてしまい，通信の失敗との区別がつきません． documentSnapshot.existsで確認したかったのですが，何か他に良い方法ありますか？ <a href="https://firebase.google.com/docs/firestore/manage-data/transactions?hl=ja">https://firebase.google.com/docs/firestore/manage-data/transactions?hl=ja</a></span>
          <span class="chatlog__edited-timestamp" title="06-Aug-18 05:37 PM">(edited)</span>
        </div>
      </div>
      <div class="chatlog__embed">
        <div class="chatlog__embed-color-pill chatlog__embed-color-pill--default"></div>
        <div class="chatlog__embed-content-container">
          <div class="chatlog__embed-content">
            <div class="chatlog__embed-text">
              <div class="chatlog__embed-title">
                <a class="chatlog__embed-title-link" href="https://firebase.google.com/docs/firestore/manage-data/transactions?hl=ja">
                  <div class="markdown preserve-whitespace">トランザクションと一括書き込み &nbsp;|&nbsp; Firebase</div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>