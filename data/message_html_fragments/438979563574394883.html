<div class="chatlog__message-group">
  <div id="chatlog__message-container-438979563574394883" class="chatlog__message-container " data-message-id="438979563574394883">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/127674083331538944/4893b43ea9ee2231b8ffb8b05c305ce3.png?size=512" alt="Avatar" loading="lazy">
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header">
          <span class="chatlog__author" style="color: rgb(155, 89, 182)" title="norio_nomura#8334" data-user-id="127674083331538944">norio_nomura</span>
          <span class="chatlog__timestamp">26-Apr-18 08:28 AM</span>
        </div>
        <div class="chatlog__content chatlog__markdown">
          <span class="chatlog__markdown-preserve">
            <div class="chatlog__markdown-quote">
              <div class="chatlog__markdown-quote-border"></div>
              <div class="chatlog__markdown-quote-content">でも A(2) も解放されないといけない気が。 </div>
            </div>これってCoW時点では<span class="chatlog__markdown-pre chatlog__markdown-pre--inline">A(2)</span>もコピーされてるから、解放されなくて正解な気が。 <span class="chatlog__markdown-mention" title="swift41#2144">@swift-4.1.3</span>
            <div class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">class A : CustomStringConvertible{ let val: Int init(_ val: Int) { self.val = val } deinit { print("deinit: \(self)") } var description: String { return "A(\(val))" } } var x: ArraySlice&lt;A&gt; = [A(1), A(2), A(3)] do { let y = x // yは[A(1), A(2), A(3)]を保持 print("A") x.removeFirst() // xは[A(1), A(2), A(3)]を保持して[A(2), A(3)]を露出 x[2] = A(4) // CoW発生、xは[A(2), A(4)]を保持 print("B") x.removeFirst() // xは[A(2), A(4)]を保持して[A(4)]を露出 x[2] = A(5) // xは[A(2), A(5)]を保持して[A(5)]を露出、A(4)解放 print("C") x.removeFirst() // xは[A(2), A(5)]を保持して[]を露出 print("D") } // y解放、xに保持されていないA(1),A(3)解放 print("E")</div>
          </span>
          <span class="chatlog__edited-timestamp" title="26-Apr-18 08:48 AM">(edited)</span>
        </div>
      </div>
    </div>
  </div>
</div>