<div class="chatlog__message-group">
  <div class="chatlog__author-avatar-container">
    <img class="chatlog__author-avatar" src="https://cdn.discordapp.com/avatars/293624673265123328/accd07acc220a18568ba46a6e9ede18a.png?size=128" alt="Avatar" loading="lazy">
  </div>
  <div class="chatlog__messages">
    <span class="chatlog__author-name" title="koher#9336" data-user-id="293624673265123328" style="color: rgb(17,128,106)">koher</span>
    <span class="chatlog__timestamp">02-May-17 02:41 AM</span>
    <div class="chatlog__message " data-message-id="308794992770416640" id="message-308794992770416640" title="Message sent: 02-May-17 02:41 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">ちがうか。↓みたいなのがあればいいのか。 <div class="pre pre--multiline language-swift">func makeAsync&lt;T&gt;(_: ((T) -&gt; ()) -&gt; ()) async -&gt; T</div></span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308795356160983041" id="message-308795356160983041" title="Message sent: 02-May-17 02:42 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">
            <div class="pre pre--multiline language-swift">func foo() async -&gt; Int { return await makeAsync { emit in DispatchQueue.main.asyncAfter(deadline: .now + 5.0) { emit(42) } } }</div>
          </span>
          <span class="chatlog__edited-timestamp" title="02-May-17 02:42 AM">(edited)</span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308795829747974146" id="message-308795829747974146" title="Message sent: 02-May-17 02:44 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">現実的にはエラーが起こることも考えて↓かな。 <div class="pre pre--multiline language-swift">func makeAsync&lt;T&gt;(_: ((T) -&gt; ()) throws -&gt; ()) async rethrows -&gt; T</div></span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308796020450394112" id="message-308796020450394112" title="Message sent: 02-May-17 02:45 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace"><span class="mention" title="tarunon#9603">@tarunon</span> それってエラーからの回復だから、非同期処理に対応させると同期化だと思うんですよね。</span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308796298050404352" id="message-308796298050404352" title="Message sent: 02-May-17 02:46 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">なので、 <span class="pre pre--inline">do</span> - <span class="pre pre--inline">defer</span> 相当のものは同期化というのがあり得る気がしてるんですが、現実的にはノンブロッキング化する方が必要だろうなと。</span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308796343097360384" id="message-308796343097360384" title="Message sent: 02-May-17 02:46 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">もし同期化であれば</span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308796623054700544" id="message-308796623054700544" title="Message sent: 02-May-17 02:47 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">↓みたいな感じになるのかな・・・。 <div class="pre pre--multiline language-swift">func pureInt() -&gt; Int { do { return await asyncInt() } wait }</div></span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308796787408502784" id="message-308796787408502784" title="Message sent: 02-May-17 02:48 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">こっちの方が理論上は <span class="pre pre--inline">catch</span> によく対応してるような気はします。</span>
        </div>
      </div>
    </div>
    <div class="chatlog__message " data-message-id="308797031537704961" id="message-308797031537704961" title="Message sent: 02-May-17 02:49 AM">
      <div class="chatlog__content">
        <div class="markdown">
          <span class="preserve-whitespace">ノンブロッキングの方は、そういう関数があればいいだけな気もしますね・・・。 <div class="pre pre--multiline language-swift">func doAsync(_: () async -&gt; ())</div> みたいな。</span>
          <span class="chatlog__edited-timestamp" title="02-May-17 02:49 AM">(edited)</span>
        </div>
      </div>
    </div>
  </div>
</div>