<div class="chatlog__message-group">
  <div id="chatlog__message-container-373114548959444992" class="chatlog__message-container" data-message-id="373114548959444992">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/embed/avatars/4.png" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(241,196,15)" title="takasek#2409" data-user-id="295054334234722305">takasek</span> <a href="/channels/306995750418513920?category=main&amp;channel=swift-2&amp;message_id=373115299953770496"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-373114548959444992">10/26/2017 2:24 PM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆæ¶ˆã›ã‚‹æ–¹å‘æ€§æ¢ã‚ŠãŸã„ã§ã™ã­</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-373115299953770496" class="chatlog__message-container" data-message-id="373115299953770496">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="10/26/2017 2:26 PM">14:26</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">URLã‚’Stringã¨ã—ã¦æŒã¤è©±ã€ - ãã“ã‚’å‹ã¨ã—ã¦æ˜ç¤ºã—ãŸã„ - <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">url.flatMap {URL(string: $0)}</code> ã‚’éƒ½åº¦æ›¸ããŸããªã„ ã¨æ€ã£ãŸã‘ã©ã€<img loading="lazy" class="chatlog__emoji " alt="ğŸ‘‡" title="point_down" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f447.svg">ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã©ã†ã§ã™ã‹ã­ <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift">/// ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ãŸStringã¨ã€TypedãªURLã¯çºã‚ã¦ç‹¬è‡ªå‹ã«æŠ¼ã—è¾¼ã‚ã‚‹ã»ã†ãŒã„ã„ struct RobustURL: Codable { let rawValue: String var typed: URL? { return URL(string: rawValue) } func encode(to encoder: Encoder) throws { var container = encoder.singleValueContainer() try container.encode(rawValue) } init(from decoder: Decoder) throws { rawValue = try decoder.singleValueContainer().decode(String.self) } } /// CoreGraphicã«ä¾å­˜ã—ãªã„ç‹¬è‡ªå‹ struct Size: Codable { let width: Double let height: Double } import CoreGraphics extension Size { var asCGSize: CGSize { return CGSize(width: width, height: height) } } struct Fuga: Codable { let url1: RobustURL // ä¸æ­£ãªURLãŒæ¥ã†ã‚‹ã“ã¨ã‚’å‹ã¨ã—ã¦ç¤ºã›ã‚‹ let url2: RobustURL // ä¸æ­£ãªURLãŒæ¥ã†ã‚‹ã“ã¨ã‚’å‹ã¨ã—ã¦ç¤ºã›ã‚‹ let url3: URL // ä¸æ­£ãªURLãŒæ¥ãªã„ã“ã¨ã‚’å‹ã¨ã—ã¦ç¤ºã›ã‚‹ let size: Size } let data = """ { "url1": "https://failable.url", "url2": "ä¸æ­£ãªURL", "url3": "https://ensured.url", "size": { "width": 100, "height": 50 } } """.data(using: .utf8)! let fuga = try! JSONDecoder().decode(Fuga.self, from: data) fuga.url1.typed // https://failable.url fuga.url2.typed // nil fuga.url3 // https://ensured.url fuga.size.asCGSize // {w 100 h 50} let json = try! JSONEncoder().encode(fuga) print(String(data: json, encoding: .utf8)!) // {"size":{"width":100,"height":50},"url3":"https:\/\/ensured.url","url1":"https:\/\/failable.url","url2":"ä¸æ­£ãªURL"}</code></span></div>
      </div>
    </div>
  </div>
</div>