<div class="chatlog__message-group">
  <div id="chatlog__message-container-1105900411560415376" class="chatlog__message-container" data-message-id="1105900411560415376">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/291062140079570944/75d22639a88c37be90cb60118acb7df5.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(241,196,15)" title="kateinoigakukun" data-user-id="291062140079570944">kateinoigakukun</span> <a href="/channels/291211035438874625?category=main&amp;channel=beginner-help&amp;message_id=1105901588830224496"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-1105900411560415376">05/10/2023 4:53 PM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">明示的なActorの指定が無い関数に関しては実行されるスレッドはコンパイラの気持ち次第なので、基本的に保証されないと考えるほうが安全だと思います。</span></div>
        <div class="chatlog__reactions">
          <div class="chatlog__reaction" title="man_bowing"><img class="chatlog__emoji chatlog__emoji--small" alt="🙇‍♂️" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f647-200d-2642-fe0f.svg" loading="lazy"> <span class="chatlog__reaction-count">1</span></div>
        </div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-1105900738363793489" class="chatlog__message-container" data-message-id="1105900738363793489">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="05/10/2023 4:54 PM">16:54</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">Objective-Cのメソッドに対して明示的なActorを付ける方法としてこういう書き方があります。 <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-objc">#define MAIN_ACTOR __attribute__((__swift_attr__("@MainActor"))) @interface MyClass : NSObject - (void)callbackWithCompletion:(void (^)(void))completion MAIN_ACTOR; @end</code></span></div>
        <div class="chatlog__reactions">
          <div class="chatlog__reaction" title="t_naruhodo"><img class="chatlog__emoji chatlog__emoji--small" alt="t_naruhodo" src="https://cdn.discordapp.com/emojis/892393551856533584.png" loading="lazy"> <span class="chatlog__reaction-count">1</span></div>
        </div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-1105901034993356872" class="chatlog__message-container" data-message-id="1105901034993356872">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="05/10/2023 4:55 PM">16:55</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">ただ、これは若干ClangImporterが怪しくて、completionの自動async化と組み合わせたときにActorの指定が無視されてそうな動きをしています。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-1105901588830224496" class="chatlog__message-container" data-message-id="1105901588830224496">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="05/10/2023 4:58 PM">16:58</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">なので、恒久的に挙動を保証する場合、<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">@MainActor</code> な関数の下で<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">acquireToken</code> をコールバックを取る同期関数として呼び出す書き方であれば意味を漏れなく記述できると思います。</span></div>
        <div class="chatlog__reactions">
          <div class="chatlog__reaction" title="thumbsup"><img class="chatlog__emoji chatlog__emoji--small" alt="👍" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg" loading="lazy"> <span class="chatlog__reaction-count">1</span></div>
        </div>
      </div>
    </div>
  </div>
</div>