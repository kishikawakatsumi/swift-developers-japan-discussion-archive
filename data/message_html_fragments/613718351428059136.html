<div class="chatlog__message-group">
  <div id="chatlog__message-container-613718351428059136" class="chatlog__message-container" data-message-id="613718351428059136">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/370406638915420161/a90e18d5a48a5bebd4720db2fadea512.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" title="taketo1024#1158" data-user-id="370406638915420161">taketo1024</span> <a href="/channels/304939011904897024?category=main&amp;channel=swiftpm&amp;message_id=613718351428059136"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-613718351428059136">21-Aug-19 12:57 PM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">Swift で C 製のシステムライブラリを使う方法として <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.systemLibrary</code> を使う方法があることを知りました。Package.swift の <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">target</code> の中に <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">.systemLibrary(name: "Choge")</code> を入れておいて，<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Source/Choge/</code> 下に module.modulemap ファイルを <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">module Choge [system] { header "/usr/local/include/hoge.h" link "hoge" export * }</code> のようにしておくと、他の target で <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">dependencies</code> に <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Choge</code> を入れておくだけで import して使えるようになります（みなさんもうとっくに知ってた話かな？） ただ（標準の library search path に入っていない？）ライブラリをリンクをするには <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">linkerSettings: [ .unsafeFlags(["-L/usr/local/lib"]), .linkedLibrary("hoge") ]</code> のようにしなきゃいけなくて、この <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">unsafeFlag</code> がどうにかならんもんかと思っています…<img loading="lazy" class="chatlog__emoji " alt="🤔" title="thinking" src="https://twemoji.maxcdn.com/v/latest/svg/1f914.svg"> CLI で <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">swift run</code> するだけなら <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/lib</code> をするだけで library search path に追加してくれるようなのですが、Xcode にはこの設定が反映されないようです<img loading="lazy" class="chatlog__emoji " alt="🤔" title="thinking" src="https://twemoji.maxcdn.com/v/latest/svg/1f914.svg"></span> <span class="chatlog__edited-timestamp" title="21-Aug-19 01:26 PM">(edited)</span></div>
      </div>
    </div>
  </div>
</div>