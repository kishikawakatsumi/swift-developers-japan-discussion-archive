<div class="chatlog__message-group">
  <div id="chatlog__message-container-613718351428059136" class="chatlog__message-container " data-message-id="613718351428059136">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/370406638915420161/5b5a5525762c5433e5d13a8353f83202.png?size=512" alt="Avatar" loading="lazy">
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header">
          <span class="chatlog__author" style="" title="taketo1024#1158" data-user-id="370406638915420161">taketo1024</span>
          <span class="chatlog__timestamp">21-Aug-19 12:57 PM</span>
        </div>
        <div class="chatlog__content chatlog__markdown">
          <span class="chatlog__markdown-preserve">Swift で C 製のシステムライブラリを使う方法として <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">.systemLibrary</span> を使う方法があることを知りました。Package.swift の <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">target</span> の中に <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">.systemLibrary(name: "Choge")</span> を入れておいて，<span class="chatlog__markdown-pre chatlog__markdown-pre--inline">Source/Choge/</span> 下に module.modulemap ファイルを <div class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">module Choge [system] { header "/usr/local/include/hoge.h" link "hoge" export * }</div> のようにしておくと、他の target で <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">dependencies</span> に <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">Choge</span> を入れておくだけで import して使えるようになります（みなさんもうとっくに知ってた話かな？） ただ（標準の library search path に入っていない？）ライブラリをリンクをするには <div class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">linkerSettings: [ .unsafeFlags(["-L/usr/local/lib"]), .linkedLibrary("hoge") ]</div> のようにしなきゃいけなくて、この <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">unsafeFlag</span> がどうにかならんもんかと思っています…<img loading="lazy" class="chatlog__emoji " alt="🤔" title="thinking" src="https://twemoji.maxcdn.com/2/svg/1f914.svg"> CLI で <span class="chatlog__markdown-pre chatlog__markdown-pre--inline">swift run</span> するだけなら <div class="chatlog__markdown-pre chatlog__markdown-pre--multiline nohighlight">export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/lib</div> をするだけで library search path に追加してくれるようなのですが、Xcode にはこの設定が反映されないようです<img loading="lazy" class="chatlog__emoji " alt="🤔" title="thinking" src="https://twemoji.maxcdn.com/2/svg/1f914.svg"></span>
          <span class="chatlog__edited-timestamp" title="21-Aug-19 01:26 PM">(edited)</span>
        </div>
      </div>
    </div>
  </div>
</div>