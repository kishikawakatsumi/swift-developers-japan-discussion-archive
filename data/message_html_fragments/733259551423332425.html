<div class="chatlog__message-group">
  <div id="chatlog__message-container-733256697992314881" class="chatlog__message-container" data-message-id="733256697992314881">
    <div class="chatlog__message">
      <div class="chatlog__message-aside"><img class="chatlog__avatar" src="https://cdn.discordapp.com/avatars/189711109966659584/95280765d1be73ce985dce15ea3585f6.png?size=512" alt="Avatar" loading="lazy"></div>
      <div class="chatlog__message-primary">
        <div class="chatlog__header"><span class="chatlog__author" style="color:rgb(237,171,161)" title="omochimetaru#1122" data-user-id="189711109966659584">omochimetaru</span> <a href="/channels/306995750418513920?category=main&amp;channel=swift-2&amp;message_id=733260650096361514"><span class="chatlog__timestamp"></span></a><a href="#chatlog__message-container-733256697992314881">16-Jul-20 09:40 AM</a></div>
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">"\(foo)"</code> の実装がどうなるのか見た <a href="https://github.com/apple/swift/blob/87df9961a5c8ec5f6db11ae2587c13ae57ac1bd4/stdlib/public/core/StringInterpolation.swift">https://github.com/apple/swift/blob/87df9961a5c8ec5f6db11ae2587c13ae57ac1bd4/stdlib/public/core/StringInterpolation.swift</a></span></div>
        <div class="chatlog__embed">
          <div class="chatlog__embed-color-pill" style="background-color:rgba(30,35,39,255)"></div>
          <div class="chatlog__embed-content-container">
            <div class="chatlog__embed-content">
              <div class="chatlog__embed-text">
                <div class="chatlog__embed-title"><a class="chatlog__embed-title-link" href="https://github.com/apple/swift/blob/87df9961a5c8ec5f6db11ae2587c13ae57ac1bd4/stdlib/public/core/StringInterpolation.swift">
                    <div class="chatlog__markdown chatlog__markdown-preserve">apple/swift</div>
                  </a></div>
                <div class="chatlog__embed-description">
                  <div class="chatlog__markdown chatlog__markdown-preserve">The Swift Programming Language. Contribute to apple/swift development by creating an account on GitHub.</div>
                </div>
              </div>
              <div class="chatlog__embed-thumbnail-container"><a class="chatlog__embed-thumbnail-link" href="https://images-ext-2.discordapp.net/external/fj7m7VLuaV_seT8bPYkMDFODFrNdHunv8fIJancJpw4/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/10639145"> <img class="chatlog__embed-thumbnail" src="https://images-ext-2.discordapp.net/external/fj7m7VLuaV_seT8bPYkMDFODFrNdHunv8fIJancJpw4/%3Fs%3D400%26v%3D4/https/avatars2.githubusercontent.com/u/10639145" alt="Thumbnail" loading="lazy"> </a></div>
            </div>
          </div>
        </div>
        <div class="chatlog__reactions">
          <div class="chatlog__reaction" title="100"><img class="chatlog__emoji chatlog__emoji--small" alt="💯" src="https://twemoji.maxcdn.com/2/svg/1f4af.svg" loading="lazy"> <span class="chatlog__reaction-count">1</span></div>
        </div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733257051387723808" class="chatlog__message-container" data-message-id="733257051387723808">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:41 AM">09:41</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">1. TextOutputStreamable かつ CustomStringConvertibleの場合 2. TextOutputStreamableの場合 3. CustomStringConvertibleの場合 4. 任意の<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">&lt;T&gt;</code> 5. <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Any.Type</code> の場合 の5つのオーバーロードがあるっぽい</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733257165422460978" class="chatlog__message-container" data-message-id="733257165422460978">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:42 AM">09:42</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">4のケースは <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_print_unlocked</code> っていう謎の関数に転送されていて</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733257427419660338" class="chatlog__message-container" data-message-id="733257427419660338">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:43 AM">09:43</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">Mirror.swift において定義されている <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">String.init&lt;T&gt;(describing: T)</code> の実装も、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_print_unlocked</code> への転送だった。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733257558726279178" class="chatlog__message-container" data-message-id="733257558726279178">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:43 AM">09:43</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_print_unlocked</code> の実装は結構面白くて</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733258124508790864" class="chatlog__message-container" data-message-id="733258124508790864">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:46 AM">09:46</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">6-1 最初の分岐が魔法関数 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_openExistential</code> を使ってる <code class="chatlog__markdown-pre chatlog__markdown-pre--multiline language-swift"> if _openExistential(type(of: value as Any), do: _isOptional) { let debugPrintable = value as! CustomDebugStringConvertible debugPrintable.debugDescription.write(to: &amp;target) return }</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733258596753735751" class="chatlog__message-container" data-message-id="733258596753735751">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:47 AM">09:47</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">_isOptionalは<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">&lt;T&gt;</code> を受けるので必ずopenできるがその先でoptionalかチェックするから、これでAnyの中に入ってるOptionalとかをおそらく必ず展開できて、 OptionalだからCustomDebugStringConvertibleが通る</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733258891625758820" class="chatlog__message-container" data-message-id="733258891625758820">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:49 AM">09:49</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">その先は 6-2: String分岐, 6-3: TextOutputStreamable分岐, 6-4: CustomSTringConvertible分岐, 6-5: CustomDebugStringConvertible分岐, で、最後のelseが 6-6: <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">Mirror(reflecting: value)</code></span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733259254995222589" class="chatlog__message-container" data-message-id="733259254995222589">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:50 AM">09:50</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">1が定義されているのは、もし1が無かった場合、2と3のオーバーロード解決が曖昧になるからだと思う。 で、1の実装は2と同じで、 ２の実装と3の実装は6-3と6-4と同じになってる</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733259495530037269" class="chatlog__message-container" data-message-id="733259495530037269">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:51 AM">09:51</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">ということは、2と3は4からの6-Xに対する最適化ショートカットで、1は2と3の都合で必要になった関数</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733259551423332425" class="chatlog__message-container" data-message-id="733259551423332425">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:51 AM">09:51</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">気になるのは6-5のショートカットが無いことだけど</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733259743937953825" class="chatlog__message-container" data-message-id="733259743937953825">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:52 AM">09:52</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">もしそれを実装してしまうと(7とする)、 2と3と7の重複組合せを順序付けするためには、 1に相当するやつの(2,7)版、(3,7)版、(2,3,7)版が必要になって</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733259800716116038" class="chatlog__message-container" data-message-id="733259800716116038">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:52 AM">09:52</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">組合せ爆発するからあきらめたんじゃなかろうか。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733260278699130890" class="chatlog__message-container" data-message-id="733260278699130890">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:54 AM">09:54</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve">ちなみに、<code class="chatlog__markdown-pre chatlog__markdown-pre--inline">foo</code> はオプショナルの場合の fix-itが2つ出るが、片方は、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">String(describing: foo)</code> への書き換えだから、 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">String.init(describing:)</code> の実装と 4の実装が同じ( <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_print_unlocked</code> )なのは暗黙的な規約っぽい。</span></div>
      </div>
    </div>
  </div>
  <div id="chatlog__message-container-733260650096361514" class="chatlog__message-container" data-message-id="733260650096361514">
    <div class="chatlog__message">
      <div class="chatlog__message-aside">
        <div class="chatlog__short-timestamp" title="16-Jul-20 09:56 AM">09:56</div>
      </div>
      <div class="chatlog__message-primary">
        <div class="chatlog__content chatlog__markdown"><span class="chatlog__markdown-preserve"><code class="chatlog__markdown-pre chatlog__markdown-pre--inline">_print_unlocked</code> は第二引数でStreamを取れるけどstdlib internalなので、 これはユーザーに提供されていない事になる。 <code class="chatlog__markdown-pre chatlog__markdown-pre--inline">String.init(describing:)</code> を使ってエミュレートできるけど、ストリーム処理可能な場合にパフォーマンスロスが出ちゃう。</span></div>
      </div>
    </div>
  </div>
</div>